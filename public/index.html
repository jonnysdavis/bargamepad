<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BAR Gamepad Spectator</title>
    <style>
        body { font-family: sans-serif; background: #1a1a1a; color: #eee; text-align: center; margin: 0; padding: 20px; }
        #controller { width: 100%; max-width: 800px; height: auto; margin: 20px auto; display: block; filter: drop-shadow(0 0 10px rgba(0,0,0,0.5)); }
        .button, .stick, .dpad, .body { fill: #333; stroke: #888; stroke-width: 2; transition: fill 0.1s; }
        .active { fill: #0f0 !important; stroke: #fff !important; }
        .label { font-size: 14px; fill: #fff; pointer-events: none; font-weight: bold; text-shadow: 1px 1px 2px #000; }
        #mapping-config { margin: 20px auto; width: 95%; background: #2a2a2a; padding: 15px; border-radius: 10px; display: none; box-shadow: 0 4px 15px rgba(0,0,0,0.3); overflow-x: auto; }
        table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        th, td { padding: 8px; border-bottom: 1px solid #444; text-align: left; font-size: 14px; }
        input, select { background: #444; color: #fff; border: 1px solid #666; padding: 4px; border-radius: 3px; font-size: 13px; }
        #config { margin-top: 40px; background: #2a2a2a; padding: 20px; border-radius: 10px; display: inline-block; text-align: left; max-width: 600px; }
        h1 { color: #0f0; }
    </style>
</head>
<body>
    <h1>Beyond All Reason - Gamepad Spectator</h1>

    <svg id="controller" viewBox="0 0 800 500">
        <!-- Controller Body (Xbox style) -->
        <path class="body" d="M250,100 Q400,80 550,100 Q750,120 750,300 Q750,450 600,450 Q500,450 450,350 Q400,340 350,350 Q300,450 200,450 Q50,450 50,300 Q50,120 250,100 Z" />

        <!-- Sticks -->
        <circle id="stick-left-base" class="body" cx="250" cy="220" r="45" fill="#222" />
        <circle id="stick-left" class="stick" cx="250" cy="220" r="35" />

        <circle id="stick-right-base" class="body" cx="500" cy="320" r="45" fill="#222" />
        <circle id="stick-right" class="stick" cx="500" cy="320" r="35" />

        <!-- D-Pad -->
        <path id="pad-up" class="dpad" d="M350,280 h30 v30 h-30 z" />
        <path id="pad-down" class="dpad" d="M350,340 h30 v30 h-30 z" />
        <path id="pad-left" class="dpad" d="M320,310 h30 v30 h-30 z" />
        <path id="pad-right" class="dpad" d="M380,310 h30 v30 h-30 z" />

        <!-- Face Buttons -->
        <circle id="btn-0" class="button" cx="600" cy="260" r="20" /> <!-- A -->
        <circle id="btn-1" class="button" cx="650" cy="210" r="20" /> <!-- B -->
        <circle id="btn-2" class="button" cx="550" cy="210" r="20" /> <!-- X -->
        <circle id="btn-3" class="button" cx="600" cy="160" r="20" /> <!-- Y -->

        <!-- Bumpers -->
        <rect id="btn-4" class="button" x="150" y="80" width="100" height="30" rx="10" /> <!-- LB -->
        <rect id="btn-5" class="button" x="550" y="80" width="100" height="30" rx="10" /> <!-- RB -->

        <!-- Triggers -->
        <path id="btn-6" class="button" d="M160,30 h80 v50 h-80 z" /> <!-- LT -->
        <path id="btn-7" class="button" d="M560,30 h80 v50 h-80 z" /> <!-- RT -->

        <!-- Menu/Back Buttons -->
        <rect id="btn-8" class="button" x="330" y="200" width="30" height="15" rx="5" /> <!-- View -->
        <rect id="btn-9" class="button" x="440" y="200" width="30" height="15" rx="5" /> <!-- Menu -->

        <!-- Labels -->
        <text x="600" y="295" class="label" id="lbl-btn-0" text-anchor="middle"></text> <!-- A -->
        <text x="680" y="215" class="label" id="lbl-btn-1" text-anchor="start">Right Click</text> <!-- B -->
        <text x="520" y="215" class="label" id="lbl-btn-2" text-anchor="end">Left Click</text> <!-- X -->
        <text x="600" y="130" class="label" id="lbl-btn-3" text-anchor="middle"></text> <!-- Y -->

        <text x="140" y="100" class="label" id="lbl-btn-4" text-anchor="end">Zoom Out</text> <!-- LB -->
        <text x="660" y="100" class="label" id="lbl-btn-5" text-anchor="start">Zoom In</text> <!-- RB -->

        <text x="150" y="50" class="label" id="lbl-btn-6" text-anchor="end"></text> <!-- LT -->
        <text x="650" y="50" class="label" id="lbl-btn-7" text-anchor="start"></text> <!-- RT -->

        <text x="250" y="170" class="label" id="lbl-stick-left" text-anchor="middle">Mouse / Arrows</text>
        <text x="500" y="380" class="label" id="lbl-stick-right" text-anchor="middle">Pan (Alt+Mid)</text>
    </svg>

    <div id="status">Connect a gamepad and press a button</div>

    <div id="mapping-config">
        <h3>Button Mappings</h3>
        <table>
            <thead><tr><th>Gamepad Button</th><th>Action</th><th>Value</th><th>Label</th></tr></thead>
            <tbody id="mapping-table"></tbody>
        </table>
    </div>

    <div id="config">
        <h3>Instructions</h3>
        <p><b>L3 (Press Left Stick):</b> Toggle between Mouse and Arrow keys.</p>
        <p><b>Left Stick:</b> Move Mouse / Arrows.</p>
        <p><b>Right Stick:</b> Pan camera (Middle Click + Alt + Move).</p>
        <p><b>X (Left Face Button):</b> Left Click.</p>
        <p><b>B (Right Face Button):</b> Right Click.</p>
        <p><b>Bumpers/Triggers:</b> Zoom in/out (Mouse Wheel).</p>
        <p><b>D-Pad:</b> Arrow keys.</p>
    </div>

    <script type="module" src="app.js"></script>
</body>
</html>
